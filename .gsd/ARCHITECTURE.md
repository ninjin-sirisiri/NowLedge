# Architecture

> Auto-generated by /map on 2026-01-20

## Overview

**NowLedge** は「鮮度優先」の技術ブログプラットフォームです。最新で動く情報を最短で見つけられることを目的とし、「関連度 × 鮮度」の検索ランキング、著者による検証（verified）、読者による古い判定（stale）、Community Notes による訂正・補足機能を提供します。

```
┌───────────────────────────────────────────────────────────────┐
│                          USER                                 │
│                    (Browser / Client)                         │
└────────────────────────┬──────────────────────────────────────┘
                         │
                         ▼
┌───────────────────────────────────────────────────────────────┐
│                   SolidStart App                              │
│              (SSR + File-based Routing)                       │
│                                                               │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐    │
│  │   Routes    │  │  Components │  │   Server Functions  │    │
│  │  (src/     │  │  (UI Layer) │  │   (API Layer)       │    │
│  │   routes/) │  │             │  │                     │    │
│  └─────────────┘  └─────────────┘  └─────────────────────┘    │
└────────────────────────┬──────────────────────────────────────┘
                         │
                         ▼
┌───────────────────────────────────────────────────────────────┐
│                    Cloudflare Workers                         │
│                  (Runtime / Hosting)                          │
└────────────────────────┬──────────────────────────────────────┘
                         │
                         ▼
┌───────────────────────────────────────────────────────────────┐
│                    PostgreSQL (Neon)                          │
│                      (Database)                               │
└───────────────────────────────────────────────────────────────┘
```

## Components

### SolidStart Application

- **Purpose:** フルスタックWebアプリケーションフレームワーク。SSR、ファイルベースルーティング、サーバーファンクションを提供
- **Location:** `src/`
- **Files:** 6 files
- **Pattern:** File-based routing with Vinxi

| File               | Purpose                                        | Priority |
| ------------------ | ---------------------------------------------- | -------- |
| `app.tsx`          | ルートコンポーネント、Router設定               | High     |
| `entry-client.tsx` | クライアントサイドエントリーポイント           | High     |
| `entry-server.tsx` | サーバーサイドエントリーポイント、HTML構造定義 | High     |
| `app.css`          | グローバルスタイル（Tailwind CSS）             | Medium   |
| `global.d.ts`      | グローバル型定義                               | Low      |

### Routes

- **Purpose:** ページコンポーネント、ファイルベースルーティング
- **Location:** `src/routes/`
- **Files:** 1 file
- **Pattern:** SolidStart file-based routing

| File        | Purpose                                | Priority |
| ----------- | -------------------------------------- | -------- |
| `index.tsx` | ホームページ（現在はプレースホルダー） | High     |

### Configuration

- **Purpose:** ビルド設定、TypeScript設定
- **Location:** `/` (root)

| File            | Purpose                                  | Priority |
| --------------- | ---------------------------------------- | -------- |
| `app.config.ts` | SolidStart + Vite設定（Tailwind CSS v4） | High     |
| `tsconfig.json` | TypeScript設定（ESNext、Strict mode）    | High     |
| `package.json`  | 依存関係、スクリプト定義                 | High     |

## Data Flow

1. **ユーザーがURLにアクセス** → Cloudflare Workers がリクエストを受信
2. **SSR実行** → `entry-server.tsx` が HTML をレンダリング
3. **ハイドレーション** → `entry-client.tsx` がクライアントサイドで起動
4. **ルーティング** → `@solidjs/router` が `src/routes/` のコンポーネントをマッチ
5. **API呼び出し** (将来) → Server Functions / oRPC 経由でバックエンドへ
6. **DB操作** (将来) → Neon PostgreSQL へクエリ

## Integration Points

| Service            | Type     | Purpose                     |
| ------------------ | -------- | --------------------------- |
| Cloudflare Workers | Hosting  | エッジでのSSR実行・デプロイ |
| Neon PostgreSQL    | Database | データ永続化（予定）        |
| GitHub OAuth       | Auth     | ソーシャルログイン（予定）  |
| Google OAuth       | Auth     | ソーシャルログイン（予定）  |

## Technical Debt

- [ ] **MVP未完成**: 現在はスケルトン状態、ほぼすべての機能が未実装
- [ ] **認証未実装**: Better Auth / OAuth 統合が必要
- [ ] **DB接続未実装**: Neon / Drizzle ORM 統合が必要
- [ ] **API層未実装**: oRPC または Server Functions の設定が必要
- [ ] **テスト未整備**: Vitest / Testing Library の設定が必要
- [ ] **Linting未整備**: ESLint / Oxlint の設定が必要
- [ ] **CI/CD未整備**: GitHub Actions ワークフローが必要

## Conventions

**Naming:**

- ファイル名: kebab-case（routes）、PascalCase（components）
- エクスポート: default export for page components
- パスエイリアス: `~/` → `./src/`

**Structure:**

- `src/routes/` - ページコンポーネント（ファイルベースルーティング）
- `src/components/` - 再利用可能なUIコンポーネント（予定）
- `src/lib/` - ユーティリティ、ヘルパー関数（予定）
- `docs/` - プロジェクトドキュメント
- `.gsd/` - GSD ワークフロー管理

**Testing:**

- (予定) Vitest + Solid Testing Library

---

_Last updated: 2026-01-20_
